/*
 * Picker Plugin
 * @author Ben Plum
 * @version 0.3.0
 *
 * Copyright Â© 2013 Ben Plum <mr@benplum.com>
 * Released under the MIT License <http://www.opensource.org/licenses/mit-license.php>
 */
 
if(jQuery)(function(b){function q(a){a=b.extend({},k,a);for(var e=b(this),c=0,r=e.length;c<r;c++){var d=e.eq(c),f=a;if(!d.data("picker")){b.extend(f,d.data("picker-options"));var j=b("label[for="+d.attr("id")+"]"),g=b(d.parents("label")[0]==j[0]?b.merge([],j):b.merge(b.merge([],d),j)),l=d.attr("type"),m="picker-"+("radio"==l?"radio":"checkbox"),h=d.attr("name");g.wrapAll('<div class="picker '+m+" "+f.customClass+'" />');d.addClass("picker-element").after('<div class="picker-handle"><div class="picker-flag" /></div>'); j.addClass("picker-label");g=d.parents(".picker");m=g.find(".picker-handle");d.is(":checked")&&g.addClass("checked");d.is(":disabled")&&g.addClass("disabled");f=b.extend({$picker:g,$input:d,$handle:m,$label:j,group:h,isRadio:"radio"==l,isCheckbox:"checkbox"==l},f);d.on("focus.picker",f,s).on("blur.picker",f,t).on("change.picker",f,u).on("deselect.picker",f,n);g.on("click.picker",".picker-handle",f,v).data("picker",f)}}return e}function v(a){a.preventDefault();a.stopPropagation();var b=a.data;b.$input.is(":disabled")|| (b.$input.is(":checked")?b.isRadio||n(a):h(a))}function u(a,b){if(!b){var c=a.data;c.$input.is(":disabled")||(c.$input.is(":checked")?h(a,!0):n(a,!0))}}function h(a,e){var c=a.data;"undefined"!==typeof c.group&&c.isRadio&&b('input[name="'+c.group+'"]').not(c.$input).trigger("deselect");c.$input.prop("checked",!0);c.$picker.addClass("checked");e||c.$input.trigger("change",[!0])}function n(a,b){var c=a.data;c.$input.prop("checked",!1);c.$picker.removeClass("checked");b||c.$input.trigger("change",[!0])} function s(a){a.data.$picker.addClass("focus")}function t(a){a.data.$picker.removeClass("focus")}var k={customClass:""},p={defaults:function(a){k=b.extend(k,a||{});return b(this)},disable:function(){return b(this).each(function(){var a=b(this),e=a.parent(".picker");a.prop("disabled",!0);e.addClass("disabled")})},enable:function(){return b(this).each(function(){var a=b(this),e=a.parent(".picker");a.prop("disabled",!1);e.removeClass("disabled")})},destroy:function(){return b(this).each(function(){var a= b(this),e=a.parent(".picker"),c=e.find(".picker-handle"),h=b("label[for="+a.attr("id")+"]");e.off(".picker");c.remove();a.off(".picker").removeClass("picker-element").unwrap();h.removeClass("picker-label")})}};b.fn.picker=function(a){return p[a]?p[a].apply(this,Array.prototype.slice.call(arguments,1)):"object"===typeof a||!a?q.apply(this,arguments):this}})(jQuery);